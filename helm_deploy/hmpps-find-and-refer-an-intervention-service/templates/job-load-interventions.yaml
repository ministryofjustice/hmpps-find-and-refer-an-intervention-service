apiVersion: batch/v1
kind: CronJob
metadata:
  name: load-interventions
spec:
  schedule: "0 2 * * *"
  suspend: true
  jobTemplate:
    spec:
      template:
        spec:
          restartPolicy: "Never"
          containers:
            - name: load-interventions
              image: quay.io/hmpps/hmpps-find-and-refer-an-intervention-service:latest
              imagePullPolicy: Always
              args: ["--jobName=upsertInterventionsJob"]
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - "ALL"
                runAsNonRoot: true
                seccompProfile:
                  type: RuntimeDefault
{{- include "deployment.envs" . | nindent 14 }}